{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SACAC,EAAAF,GAASG,OAAOC,KAAK,CAAEC,MAAO,QAASC,SAAS,IAEhD,IAAMC,EAAM,oBAENC,EAAO,GAEPC,EAAO,CACXC,KAAaC,SAASC,cAAc,QACpCC,WAAaF,SAASC,cAAc,qBACpCE,UAAaH,SAASC,cAAc,oBACpCG,YAAaJ,SAASC,cAAc,uBAqDtC,SAASI,EAAUC,G,IAAEC,EAAFD,EAAEC,SAAUC,EAAZF,EAAYE,MAC7BjB,EAAAF,GAASG,OAAOiB,QAAQ,uBAAwCC,OAAfH,EAAS,QAAYG,OAANF,EAAM,O,CAGxE,SAASG,EAAQL,G,IAAEC,EAAFD,EAAEC,SAAUC,EAAZF,EAAYE,MAC3BjB,EAAAF,GAASG,OAAOoB,QAAQ,sBAAqCF,OAAfH,EAAS,QAAYG,OAANF,EAAM,O,CAGrE,SAASK,EAAcN,EAAUC,GAC/B,OAAO,IAAIM,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAgBC,KAAKC,SAAW,GAEtCC,YAAW,WACLH,EACFF,EAAQ,CAAER,WAAUC,UAEpBQ,EAAO,CAAET,WAAUC,S,GAEpBA,E,IApEPV,EAAKC,KAAKsB,iBAAiB,UAK3B,SAAsBC,GACpBA,EAAEC,iBA2BJ,WAOE,IALA,IAAMC,EAAYC,KAAKC,MAAMC,aAAaC,QAAQhC,IAC9CY,EAAWqB,OAAOL,EAAUhB,OAC1BsB,EAASD,OAAOL,EAAUM,MAC1BC,EAASF,OAAOL,EAAUO,QAEvBxB,EAAW,EAAGA,GAAYwB,EAAQxB,IAEvCM,EAAcN,EAAUC,GACrBwB,KAAK3B,GACL4B,MAAMtB,GAEXH,GAASsB,C,CAvCXI,GACAZ,EAAEa,OAAOC,QACTT,aAAaU,WAAWzC,E,IAR1BE,EAAKC,KAAKsB,iBAAiB,SAW3B,SAAiBC,GACfzB,EAAKyB,EAAEa,OAAOG,MAAQhB,EAAEa,OAAOI,MAC/BZ,aAAaa,QAAQ5C,EAAK6B,KAAKgB,UAAU5C,G,IAG3C,WACI,IAAK8B,aAAaC,QAAQhC,GACtB,OAGJ,IACE,IAAM8C,EAAYjB,KAAKC,MAAMC,aAAaC,QAAQhC,IAClDE,EAAKI,WAAWqC,MAAQG,EAAUlC,MAClCV,EAAKK,UAAUoC,MAAQG,EAAUZ,KACjChC,EAAKM,YAAYmC,MAAQG,EAAUX,M,CACnC,MAAOY,GACPpD,EAAAF,GAASG,OAAOoB,QAAS,kC,EAzB/BgC,E","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nNotiflix.Notify.init({ width: '350px', useIcon: false });\n\nconst KEY = 'first-step-amount';\n\nconst data = {};\n\nconst refs = {\n  form:        document.querySelector('form'),\n  delayFirst:  document.querySelector('input[name=delay]'),\n  delayStep:   document.querySelector('input[name=step]'),\n  delayAmount: document.querySelector('input[name=amount]'),\n}\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.form.addEventListener('input', onInput);\n\ngetDatalocalStorage();\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  onStart();\n  e.target.reset();\n  localStorage.removeItem(KEY);\n}\n\nfunction onInput(e) {\n  data[e.target.name] = e.target.value;\n  localStorage.setItem(KEY, JSON.stringify(data));\n}\n\nfunction getDatalocalStorage() {\n    if (!localStorage.getItem(KEY)) {\n        return;\n    };\n\n    try {\n      const savedData = JSON.parse(localStorage.getItem(KEY));\n      refs.delayFirst.value = savedData.delay;\n      refs.delayStep.value = savedData.step;\n      refs.delayAmount.value = savedData.amount;\n    } catch (error) {\n      Notiflix.Notify.failure(`❌ Не получилось получить данные`);\n    };\n};\n\n\nfunction onStart() {\n\n  const dataLocal = JSON.parse(localStorage.getItem(KEY));\n  let delay    = Number(dataLocal.delay);\n  const step   = Number(dataLocal.step);\n  const amount = Number(dataLocal.amount);\n\n  for (let position = 1; position <= amount; position++) {\n\n      createPromise(position, delay)\n        .then(onSuccess)\n        .catch(onError);\n    \n    delay += step;\n  }\n};\n\nfunction onSuccess({ position, delay }){\n  Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay} ms`);\n};\n\nfunction onError({ position, delay }) {\n  Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay} ms`);\n};\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    \n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n    \n  })\n};"],"names":["$6JpON","parcelRequire","$parcel$interopDefault","Notify","init","width","useIcon","$ce04d3a99e08e73b$var$KEY","$ce04d3a99e08e73b$var$data","$ce04d3a99e08e73b$var$refs","form","document","querySelector","delayFirst","delayStep","delayAmount","$ce04d3a99e08e73b$var$onSuccess","param","position","delay","success","concat","$ce04d3a99e08e73b$var$onError","failure","$ce04d3a99e08e73b$var$createPromise","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","addEventListener","e","preventDefault","dataLocal","JSON","parse","localStorage","getItem","Number","step","amount","then","catch","$ce04d3a99e08e73b$var$onStart","target","reset","removeItem","name","value","setItem","stringify","savedData","error","$ce04d3a99e08e73b$var$getDatalocalStorage"],"version":3,"file":"03-promises.c75e8460.js.map"}