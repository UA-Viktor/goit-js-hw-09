{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SACAC,EAAAF,GAASG,OAAOC,KAAK,CAAEC,MAAO,QAASC,SAAS,IAEhD,MAEMC,EAAO,GAEPC,EAAO,CACXC,KAAaC,SAASC,cAAc,QACpCC,WAAaF,SAASC,cAAc,qBACpCE,UAAaH,SAASC,cAAc,oBACpCG,YAAaJ,SAASC,cAAc,uBAqDtC,SAASI,GAAUC,SAAEA,EAAQC,MAAEA,IAC7Bf,EAAAF,GAASG,OAAOe,QAAQ,uBAAqBF,QAAiBC,O,CAGhE,SAASE,GAAQH,SAAEA,EAAQC,MAAEA,IAC3Bf,EAAAF,GAASG,OAAOiB,QAAQ,sBAAoBJ,QAAeC,O,CAG7D,SAASI,EAAcL,EAAUC,GAC/B,OAAO,IAAIK,SAAQ,CAACC,EAASC,KAC3B,MAAMC,EAAgBC,KAAKC,SAAW,GAEtCC,YAAW,KACLH,EACFF,EAAQ,C,SAAEP,E,MAAUC,IAEpBO,EAAO,C,SAAER,E,MAAUC,GAAQ,GAE5BA,EAAM,G,CApEbT,EAAKC,KAAKoB,iBAAiB,UAK3B,SAAsBC,GACpBA,EAAEC,iBA2BJ,WAEE,MAAMC,EAAYC,KAAKC,MAAMC,aAAaC,QA9ChC,sBA+CV,IAAInB,EAAWoB,OAAOL,EAAUf,OAChC,MAAMqB,EAASD,OAAOL,EAAUM,MAC1BC,EAASF,OAAOL,EAAUO,QAEhC,IAAK,IAAIvB,EAAW,EAAGA,GAAYuB,EAAQvB,IAEvCK,EAAcL,EAAUC,GACrBuB,KAAKzB,GACL0B,MAAMtB,GAEXF,GAASqB,C,CAvCXI,GACAZ,EAAEa,OAAOC,QACTT,aAAaU,WApBH,oB,IAYZrC,EAAKC,KAAKoB,iBAAiB,SAW3B,SAAiBC,GACfvB,EAAKuB,EAAEa,OAAOG,MAAQhB,EAAEa,OAAOI,MAC/BZ,aAAaa,QAzBH,oBAyBgBf,KAAKgB,UAAU1C,G,IAG3C,WACI,IAAK4B,aAAaC,QA7BV,qBA8BJ,OAGJ,IACE,MAAMc,EAAYjB,KAAKC,MAAMC,aAAaC,QAlCpC,sBAmCN5B,EAAKI,WAAWmC,MAAQG,EAAUjC,MAClCT,EAAKK,UAAUkC,MAAQG,EAAUZ,KACjC9B,EAAKM,YAAYiC,MAAQG,EAAUX,M,CACnC,MAAOY,GACPjD,EAAAF,GAASG,OAAOiB,QAAQ,kC,EAzB9BgC","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nNotiflix.Notify.init({ width: '350px', useIcon: false });\n\nconst KEY = 'first-step-amount';\n\nconst data = {};\n\nconst refs = {\n  form:        document.querySelector('form'),\n  delayFirst:  document.querySelector('input[name=delay]'),\n  delayStep:   document.querySelector('input[name=step]'),\n  delayAmount: document.querySelector('input[name=amount]'),\n}\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.form.addEventListener('input', onInput);\n\ngetDatalocalStorage();\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  onStart();\n  e.target.reset();\n  localStorage.removeItem(KEY);\n}\n\nfunction onInput(e) {\n  data[e.target.name] = e.target.value;\n  localStorage.setItem(KEY, JSON.stringify(data));\n}\n\nfunction getDatalocalStorage() {\n    if (!localStorage.getItem(KEY)) {\n        return;\n    };\n\n    try {\n      const savedData = JSON.parse(localStorage.getItem(KEY));\n      refs.delayFirst.value = savedData.delay;\n      refs.delayStep.value = savedData.step;\n      refs.delayAmount.value = savedData.amount;\n    } catch (error) {\n      Notiflix.Notify.failure(`❌ Не получилось получить данные`);\n    };\n};\n\n\nfunction onStart() {\n\n  const dataLocal = JSON.parse(localStorage.getItem(KEY));\n  let delay    = Number(dataLocal.delay);\n  const step   = Number(dataLocal.step);\n  const amount = Number(dataLocal.amount);\n\n  for (let position = 1; position <= amount; position++) {\n\n      createPromise(position, delay)\n        .then(onSuccess)\n        .catch(onError);\n    \n    delay += step;\n  }\n};\n\nfunction onSuccess({ position, delay }){\n  Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay} ms`);\n};\n\nfunction onError({ position, delay }) {\n  Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay} ms`);\n};\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    \n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n    \n  })\n};"],"names":["$7Y9D8","parcelRequire","$parcel$interopDefault","Notify","init","width","useIcon","$47d4ff9957288465$var$data","$47d4ff9957288465$var$refs","form","document","querySelector","delayFirst","delayStep","delayAmount","$47d4ff9957288465$var$onSuccess","position","delay","success","$47d4ff9957288465$var$onError","failure","$47d4ff9957288465$var$createPromise","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","addEventListener","e","preventDefault","dataLocal","JSON","parse","localStorage","getItem","Number","step","amount","then","catch","$47d4ff9957288465$var$onStart","target","reset","removeItem","name","value","setItem","stringify","savedData","error","$47d4ff9957288465$var$getDatalocalStorage"],"version":3,"file":"03-promises.6c55c462.js.map"}